<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>FPS Mobile 3D</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<style>
html,body{margin:0;overflow:hidden;background:#000;font-family:Arial}
#hud{position:fixed;top:10px;left:50%;transform:translateX(-50%);color:#fff;
background:rgba(0,0,0,.6);padding:8px 16px;border-radius:12px;z-index:10}
#shoot{position:fixed;right:15px;bottom:20px;width:90px;height:90px;border-radius:50%;
background:radial-gradient(circle,#ff4444,#990000);border:none;color:#fff;font-size:20px;z-index:10}
#joy{position:fixed;left:15px;bottom:20px;width:120px;height:120px;border-radius:50%;
background:rgba(255,255,255,.08);z-index:10}
#stick{width:50px;height:50px;background:#fff;border-radius:50%;position:absolute;
left:35px;top:35px;opacity:.8}
#start{position:fixed;inset:0;background:#000d;color:#fff;
display:flex;align-items:center;justify-content:center;flex-direction:column;z-index:20}
#start button{padding:15px 25px;font-size:18px;border:none;border-radius:12px;background:#1f6feb;color:#fff}
</style>
</head>
<body>

<div id="start">
<h2>FPS 3D MOBILE</h2>
<button onclick="startGame()">JOGAR</button>
</div>

<div id="hud">‚ù§Ô∏è <span id="life">100</span> | üéØ <span id="score">0</span></div>
<button id="shoot">TIRO</button>
<div id="joy"><div id="stick"></div></div>

<script src="https://unpkg.com/three@0.153.0/build/three.min.js"></script>

<script>
let scene,camera,renderer;
let life=100,score=0;
let enemies=[],bullets=[];
let moveX=0,moveZ=0;

const lifeEl=document.getElementById('life');
const scoreEl=document.getElementById('score');
const shootBtn=document.getElementById('shoot');
const joy=document.getElementById('joy');
const stick=document.getElementById('stick');

function startGame(){
document.getElementById('start').style.display='none';

scene=new THREE.Scene();
scene.background=new THREE.Color(0x111122);

camera=new THREE.PerspectiveCamera(75,innerWidth/innerHeight,.1,1000);
camera.position.set(0,1.6,5);

renderer=new THREE.WebGLRenderer({antialias:true});
renderer.setSize(innerWidth,innerHeight);
document.body.appendChild(renderer.domElement);

const light=new THREE.HemisphereLight(0xffffff,0x444444,1);
scene.add(light);

const ground=new THREE.Mesh(
new THREE.PlaneGeometry(200,200),
new THREE.MeshStandardMaterial({color:0x222244})
);
ground.rotation.x=-Math.PI/2;
scene.add(ground);

setInterval(spawnEnemy,1200);
animate();
}

function spawnEnemy(){
const geo=new THREE.SphereGeometry(.6,16,16);
const mat=new THREE.MeshStandardMaterial({color:0xff3333});
const e=new THREE.Mesh(geo,mat);
const a=Math.random()*Math.PI*2;
e.position.set(Math.cos(a)*15,0.6,Math.sin(a)*15);
e.hp=3;
scene.add(e);
enemies.push(e);
}

function shoot(){
const b=new THREE.Mesh(
new THREE.SphereGeometry(.12,8,8),
new THREE.MeshStandardMaterial({color:0xffff00})
);
b.position.copy(camera.position);
b.vel=new THREE.Vector3(0,0,-1).applyQuaternion(camera.quaternion).multiplyScalar(.7);
scene.add(b);
bullets.push(b);
navigator.vibrate?.(30);
}

shootBtn.onclick=shoot;

function animate(){
requestAnimationFrame(animate);

camera.position.x+=moveX*0.1;
camera.position.z+=moveZ*0.1;

enemies.forEach((e,i)=>{
e.position.lerp(camera.position,.002);
if(e.position.distanceTo(camera.position)<1){
life-=0.3;
lifeEl.innerText=Math.max(0,Math.floor(life));
if(life<=0) location.reload();
}
});

bullets.forEach((b,i)=>{
b.position.add(b.vel);
enemies.forEach((e,j)=>{
if(b.position.distanceTo(e.position)<.6){
scene.remove(b);
scene.remove(e);
bullets.splice(i,1);
enemies.splice(j,1);
score+=10;
scoreEl.innerText=score;
}
});
});

renderer.render(scene,camera);
}

/* JOYSTICK */
let touching=false,startX,startY;

joy.addEventListener('touchstart',e=>{
touching=true;
startX=e.touches[0].clientX;
startY=e.touches[0].clientY;
});

joy.addEventListener('touchmove',e=>{
if(!touching)return;
let dx=e.touches[0].clientX-startX;
let dy=e.touches[0].clientY-startY;
dx=Math.max(-40,Math.min(40,dx));
dy=Math.max(-40,Math.min(40,dy));
stick.style.left=35+dx+'px';
stick.style.top=35+dy+'px';
moveX=dx/40;
moveZ=dy/40;
});

joy.addEventListener('touchend',()=>{
touching=false;
stick.style.left='35px';
stick.style.top='35px';
moveX=moveZ=0;
});

</script>
</body>
</html>
